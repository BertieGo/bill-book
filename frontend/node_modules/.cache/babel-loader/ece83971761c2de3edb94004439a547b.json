{"ast":null,"code":"import _classCallCheck from\"/workspace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/workspace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/workspace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/workspace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import cloneDeep from\"lodash/cloneDeep\";import{fixedFloat,floorFloat,getPercent}from\"../../utils/math\";import{Col,Row,Tooltip}from\"antd\";var Bar=/*#__PURE__*/function(_React$Component){_inherits(Bar,_React$Component);var _super=_createSuper(Bar);function Bar(){var _this;_classCallCheck(this,Bar);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.makeRowData=function(){var data=_this.props.data;var dataCopy=cloneDeep(data);if(data.length>0){dataCopy=dataCopy.sort(function(prev,next){return next.amount-prev.amount;});var maxPercent=dataCopy[0].percent;dataCopy.forEach(function(item){item.barPercent=getPercent(item.percent,maxPercent);});}return dataCopy;};_this.renderRow=function(item){var displayPercent=\"\".concat(floorFloat(item.percent),\"%\");var displayAmount=fixedFloat(item.amount);return/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Tooltip,{title:\"\\u91D1\\u989D: \".concat(displayAmount,\" \\u5360\\u6BD4\\uFF1A\").concat(displayPercent)},/*#__PURE__*/React.createElement(Col,{span:20},/*#__PURE__*/React.createElement(\"div\",{className:\"row-bar\",style:{width:\"\".concat(item.barPercent,\"%\"),backgroundColor:item.color}}))),/*#__PURE__*/React.createElement(Col,{span:4},/*#__PURE__*/React.createElement(\"span\",{className:\"ml20\"},displayAmount)));};_this.renderRowChart=function(item){return/*#__PURE__*/React.createElement(Row,{className:\"mb10\"},/*#__PURE__*/React.createElement(Col,{span:4},item.title,\"\\uFF1A\"),/*#__PURE__*/React.createElement(Col,{span:8},_this.renderRow(item)));};return _this;}_createClass(Bar,[{key:\"render\",value:function render(){var data=this.makeRowData();return/*#__PURE__*/React.createElement(\"div\",null,data.map(this.renderRowChart));}}]);return Bar;}(React.Component);export{Bar as default};","map":{"version":3,"sources":["/workspace/src/components/Bar/index.tsx"],"names":["React","cloneDeep","fixedFloat","floorFloat","getPercent","Col","Row","Tooltip","Bar","makeRowData","data","props","dataCopy","length","sort","prev","next","amount","maxPercent","percent","forEach","item","barPercent","renderRow","displayPercent","displayAmount","width","backgroundColor","color","renderRowChart","title","map","Component"],"mappings":"ofAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,MAAOC,CAAAA,SAAP,KAAsB,kBAAtB,CACA,OAAQC,UAAR,CAAoBC,UAApB,CAAgCC,UAAhC,KAAiD,kBAAjD,CACA,OAAQC,GAAR,CAAaC,GAAb,CAAkBC,OAAlB,KAAgC,MAAhC,C,GAEqBC,CAAAA,G,2TAEjBC,W,CAAc,UAAM,IACRC,CAAAA,IADQ,CACC,MAAKC,KADN,CACRD,IADQ,CAEhB,GAAIE,CAAAA,QAAQ,CAAGX,SAAS,CAACS,IAAD,CAAxB,CACA,GAAIA,IAAI,CAACG,MAAL,CAAc,CAAlB,CAAqB,CACjBD,QAAQ,CAAGA,QAAQ,CAACE,IAAT,CAAc,SAACC,IAAD,CAAOC,IAAP,QAAgBA,CAAAA,IAAI,CAACC,MAAL,CAAcF,IAAI,CAACE,MAAnC,EAAd,CAAX,CACA,GAAMC,CAAAA,UAAU,CAAGN,QAAQ,CAAC,CAAD,CAAR,CAAYO,OAA/B,CACAP,QAAQ,CAACQ,OAAT,CAAiB,SAAAC,IAAI,CAAI,CACrBA,IAAI,CAACC,UAAL,CAAkBlB,UAAU,CAACiB,IAAI,CAACF,OAAN,CAAeD,UAAf,CAA5B,CACH,CAFD,EAGH,CACD,MAAON,CAAAA,QAAP,CACH,C,OAEDW,S,CAAY,SAACF,IAAD,CAAqB,CAE7B,GAAMG,CAAAA,cAAc,WAAMrB,UAAU,CAACkB,IAAI,CAACF,OAAN,CAAhB,KAApB,CACA,GAAMM,CAAAA,aAAa,CAAGvB,UAAU,CAACmB,IAAI,CAACJ,MAAN,CAAhC,CAEA,mBACI,oBAAC,GAAD,mBACI,oBAAC,OAAD,EAAS,KAAK,yBAASQ,aAAT,+BAA6BD,cAA7B,CAAd,eACI,oBAAC,GAAD,EAAK,IAAI,CAAE,EAAX,eACI,2BAAK,SAAS,CAAC,SAAf,CAAyB,KAAK,CAAE,CAAEE,KAAK,WAAKL,IAAI,CAACC,UAAV,KAAP,CAAgCK,eAAe,CAAEN,IAAI,CAACO,KAAtD,CAAhC,EADJ,CADJ,CADJ,cAMI,oBAAC,GAAD,EAAK,IAAI,CAAE,CAAX,eACI,4BAAM,SAAS,CAAC,MAAhB,EAAyBH,aAAzB,CADJ,CANJ,CADJ,CAYH,C,OAEDI,c,CAAiB,SAACR,IAAD,CAAqB,CAClC,mBACI,oBAAC,GAAD,EAAK,SAAS,CAAC,MAAf,eACI,oBAAC,GAAD,EAAK,IAAI,CAAE,CAAX,EAAgBA,IAAI,CAACS,KAArB,UADJ,cAEI,oBAAC,GAAD,EAAK,IAAI,CAAE,CAAX,EAAgB,MAAKP,SAAL,CAAeF,IAAf,CAAhB,CAFJ,CADJ,CAMH,C,sEAEQ,CACL,GAAMX,CAAAA,IAAI,CAAG,KAAKD,WAAL,EAAb,CACA,mBACI,+BAEQC,IAAI,CAACqB,GAAL,CAAS,KAAKF,cAAd,CAFR,CADJ,CAOH,C,iBApD4B7B,KAAK,CAACgC,S,SAAlBxB,G","sourcesContent":["import React from \"react\";\nimport {IChartProps, IPathItem} from \"../../declare\";\nimport cloneDeep from \"lodash/cloneDeep\";\nimport {fixedFloat, floorFloat, getPercent} from \"../../utils/math\";\nimport {Col, Row, Tooltip} from \"antd\";\n\nexport default class Bar extends React.Component<IChartProps, {}>{\n\n    makeRowData = () => {\n        const { data } = this.props;\n        let dataCopy = cloneDeep(data);\n        if (data.length > 0) {\n            dataCopy = dataCopy.sort((prev, next) => next.amount - prev.amount);\n            const maxPercent = dataCopy[0].percent;\n            dataCopy.forEach(item => {\n                item.barPercent = getPercent(item.percent, maxPercent)\n            })\n        }\n        return dataCopy;\n    }\n\n    renderRow = (item: IPathItem) => {\n\n        const displayPercent = `${floorFloat(item.percent)}%`;\n        const displayAmount = fixedFloat(item.amount);\n\n        return (\n            <Row>\n                <Tooltip title={`金额: ${displayAmount} 占比：${displayPercent}`}>\n                    <Col span={20}>\n                        <div className=\"row-bar\" style={{ width: `${item.barPercent}%`, backgroundColor: item.color }}/>\n                    </Col>\n                </Tooltip>\n                <Col span={4}>\n                    <span className=\"ml20\">{ displayAmount }</span>\n                </Col>\n            </Row>\n        )\n    }\n\n    renderRowChart = (item: IPathItem) => {\n        return (\n            <Row className=\"mb10\">\n                <Col span={4}>{ item.title }：</Col>\n                <Col span={8}>{ this.renderRow(item) }</Col>\n            </Row>\n        )\n    }\n\n    render() {\n        const data = this.makeRowData();\n        return (\n            <div>\n                {\n                    data.map(this.renderRowChart)\n                }\n            </div>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}