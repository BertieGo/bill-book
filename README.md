
## Introduce

å°å°å‰ç«¯å¼€å‘ä¸€æšï¼Œä¸€ç›´éå¸¸éå¸¸éå¸¸å–œæ¬¢ XMindï¼Œä¹Ÿä½¿ç”¨äº†å¤šå¹´çš„ XMindï¼Œä¹Ÿçƒ­è¡·äºè½¯ä»¶æŠ€æœ¯ï¼Œå¸Œæœ›èƒ½å€Ÿæ­¤æœºä¼šèƒ½ä¸€èµ·å…±äº‹ ğŸ¥°ã€‚

æœ¬ä½œä¸šçš„çº¿ä¸Šæ¼”ç¤ºåœ°å€ï¼š[x-mind-home-work](https://0504.pet/x-mind-home-work)  

é’ˆå¯¹æœ¬ä½œä¸šçš„éœ€æ±‚ï¼šç®€æ˜“çš„è®°è´¦å•åŠŸèƒ½ã€‚é€‰å–çš„æŠ€æœ¯ä¸ºå‰åç«¯åˆ†ç¦»çš„æ¨¡å¼ï¼ŒæŠ€æœ¯é€‰å‹åˆ†åˆ«ä¸ºï¼š
- å‰ç«¯ï¼šTypescript / React / Ant Design
- åç«¯ï¼šNode / Express
- æ•°æ®åº“ï¼šMongoDB
- å•å…ƒæµ‹è¯•ï¼šJest 
- å®¹å™¨/ç¼–æ’ï¼šDocker / Docker-Compose

## Usage

- #### Docker

> æµ‹è¯•æœºç‰ˆæœ¬å‚è€ƒ  
> MacOS Mojave 10.14.6ï¼ŒDocker 19.03.5ï¼ŒDocker-Compose 1.24.1  
> Ubuntu 16.04.1 LTS, Docker 19.03.8, Docker-Compose 1.18.0  
 > ç¡®è®¤ç«¯å£ 4000ã€8800ã€27017 æœªè¢«å ç”¨

å‡å¦‚å·²ç»å®‰è£…äº† docker å’Œ docker-composeï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥è¿è¡Œæ ¹ç›®å½•ä¸‹çš„ `` docker-start.sh `` å®Œæˆé¡¹ç›®çš„å¯åŠ¨ï¼Œè€Œä¸éœ€è¦å»å…³æ³¨
 Nodeã€MongoDB ç¯å¢ƒçš„æ­å»ºã€‚
 
 å½“ docker-compose å°†æ‰€æœ‰å®¹å™¨å¯åŠ¨ä¹‹åï¼Œå°±å¯ä»¥é€šè¿‡è®¿é—® http://localhost:4000/x-mind-home-work çš„æ–¹å¼æ¥è®¿é—®ã€‚
 
 - #### No Docker
 > æµ‹è¯•æœºç‰ˆæœ¬å‚è€ƒ  
 > MacOS Mojave 10.14.6ï¼ŒNode 12.13.0ï¼ŒMongoDB 4.2.5    
 > ç¡®è®¤ç«¯å£ 3000ã€8800ã€27017 æœªè¢«å ç”¨

- é¦–å…ˆéœ€è¦å®‰è£…å¹¶å¯åŠ¨ MongoDBï¼Œé»˜è®¤ç«¯å£ä¸ºï¼š`` 27017``ã€‚
- è¿è¡Œæ ¹ç›®å½•ä¸‹ `` no-docker-starter.sh ``ã€‚

è®¿é—®æ–¹å¼ï¼šhttp://localhost:3000

 ## Consider
 
 ### å‰ç«¯
 #### å·¥å…·é€‰å‹ï¼š
 ![images](https://github.com/BertieGo/bill-book/blob/master/mind-images/frontend-tech-pick.jpg?raw=true)
 
 #### ç›®å½•ç»“æ„ï¼š  
 ```
 ./src
 â”œâ”€â”€ App.css
 â”œâ”€â”€ App.tsx // ä¸šåŠ¡å®¹å™¨
 â”œâ”€â”€ components // å…¬ç”¨ç»„ä»¶æ–‡ä»¶å¤¹
 â”‚Â Â  â”œâ”€â”€ Bar // æ¡å½¢å›¾
 â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Bar.test.tsx
 â”‚Â Â  â”‚Â Â  â”œâ”€â”€ __snapshots__
 â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ Bar.test.tsx.snap
 â”‚Â Â  â”‚Â Â  â””â”€â”€ index.tsx
 â”‚Â Â  â”œâ”€â”€ CategorySelector // ç±»å‹é€‰æ‹©å™¨ï¼Œç”¨äºé€‰å–è´¦å•ç§ç±»
 â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Category.test.tsx
 â”‚Â Â  â”‚Â Â  â”œâ”€â”€ __snapshots__
 â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ Category.test.tsx.snap
 â”‚Â Â  â”‚Â Â  â””â”€â”€ index.tsx
 â”‚Â Â  â””â”€â”€ Pie // é¥¼çŠ¶å›¾ï¼Œé‡‡ç”¨ svg çš„ path ä½œå›¾
 â”‚Â Â      â”œâ”€â”€ Pie.test.tsx
 â”‚Â Â      â”œâ”€â”€ __snapshots__
 â”‚Â Â      â”‚Â Â  â””â”€â”€ Pie.test.tsx.snap
 â”‚Â Â      â””â”€â”€ index.tsx
 â”œâ”€â”€ config // ç¯å¢ƒå˜é‡
 â”‚Â Â  â””â”€â”€ env.ts
 â”œâ”€â”€ constants.ts // å…¨å±€å¸¸é‡
 â”œâ”€â”€ container // ä¸šåŠ¡ç»„ä»¶
 â”‚Â Â  â”œâ”€â”€ AddBillForm // æ·»åŠ è´¦å•
 â”‚Â Â  â”‚Â Â  â””â”€â”€ index.tsx
 â”‚Â Â  â”œâ”€â”€ Charts // å›¾æ ‡æ 
 â”‚Â Â  â”‚Â Â  â””â”€â”€ index.tsx
 â”‚Â Â  â”œâ”€â”€ Filter // ç­›é€‰æ 
 â”‚Â Â  â”‚Â Â  â””â”€â”€ index.tsx
 â”‚Â Â  â”œâ”€â”€ Table // è¡¨æ ¼
 â”‚Â Â  â”‚Â Â  â””â”€â”€ index.tsx
 â”‚Â Â  â””â”€â”€ Title // é¡µé¢é¡¶éƒ¨ Title
 â”‚Â Â      â””â”€â”€ index.tsx
 â”œâ”€â”€ declare.ts // ts æ¥å£å’Œç±»å‹
 â”œâ”€â”€ index.css
 â”œâ”€â”€ index.tsx
 â”œâ”€â”€ react-app-env.d.ts
 â”œâ”€â”€ request // ajax è¯·æ±‚åˆ—è¡¨
 â”‚Â Â  â”œâ”€â”€ index.ts
 â”‚Â Â  â””â”€â”€ request.test.tsx
 â”œâ”€â”€ serviceWorker.ts
 â”œâ”€â”€ setupTests.ts
 â””â”€â”€ utils // å·¥å…·é›†
     â”œâ”€â”€ color // éšæœºç”Ÿæˆé¢œè‰²
     â”‚Â Â  â””â”€â”€ index.ts
     â”œâ”€â”€ math // åŒ…æ‹¬å°æ•°ç‚¹å x ä½æˆªå–åŠŸèƒ½
     â”‚Â Â  â””â”€â”€ index.ts
     â”œâ”€â”€ request // æä¾›å…¬ç”¨çš„ get å’Œ post æ–¹æ³•ç”¨äºè¯·æ±‚ ajax
     â”‚Â Â  â””â”€â”€ index.ts
     â””â”€â”€ test // Jest ä¸º react-create-app æ‰€åšçš„çš„ react component snapshot test polyfill
         â””â”€â”€ polyfill.ts
 ```
 
 #### é—®é¢˜ä¸æ€è·¯  
 
 åœ¨ä½œä¸šä¸­éœ€è¦å±•ç¤ºæ”¶æ”¯æ€»é¢å’Œå„ç±»å‹æ”¯å‡ºç»Ÿè®¡ï¼Œæƒ³åˆ°ä½¿ç”¨å›¾è¡¨ğŸ“ˆçš„å½¢å¼å»å±•ç¤ºï¼Œé‡‡å–ä¸¤ç§çš„å±•ç¤ºæ–¹å¼
 - æ¡å½¢å›¾ï¼Œç”¨äºæ’åºå±•ç¤ºä¼šæ¯”è¾ƒç›´è§‚ï¼Œä½¿ç”¨çš„æ˜¯ `` div ``  å»å®ç°ã€‚
 - é¥¼å›¾, ç”¨äºå±•ç¤ºå æ¯”ã€‚ é¥¼å›¾ä½¿ç”¨ ``svg path`` å†…çš„å¼§å½¢ API å®ç°çš„ã€‚é¦–å…ˆè®¡ç®—æ¯ä¸ªç±»å‹çš„å æ¯”ï¼Œç„¶åé€šè¿‡å æ¯”å»æ±‚å¾—æ¯ä¸€å—é¥¼çš„è§’åº¦ï¼Œå·²çŸ¥åœ†å¿ƒã€è§’åº¦ã€åŠå¾„çš„å‰æä¸‹ï¼Œ
 å¯ä»¥æ±‚å¾—å¯¹åº”çš„é¥¼çš„ ``path``ã€‚
 
 åŒæ—¶ï¼Œå›¾è¡¨å†…çš„é¢œè‰²ä¸ºéšæœºç”Ÿæˆçš„å€¼ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šç”Ÿæˆæ¥è¿‘ç™½ / é»‘çš„è‰²å€¼ï¼Œæˆ–è€…ç”Ÿæˆè¿ç»­çš„ä¸¤ä¸ªè‰²å€¼å¾ˆæ¥è¿‘çš„é¢œè‰²ï¼Œ
 è¿™ä¸¤ç§æƒ…å†µéƒ½ä¸åˆ©äºå›¾è¡¨çš„å±•ç¤ºã€‚æ‰€ä»¥é€šè¿‡ [Generate Random Color distinguishable to Humans](https://stackoverflow.com/a/31817723/13804371) å†…å›ç­”çš„æç¤ºï¼Œ
 ä½¿ç”¨ ``HSL`` æè¿°é¢œè‰²çš„æ–¹å¼å»åŒºåˆ†æ¯ä¸€æ¬¡ç”Ÿæˆçš„é¢œè‰²æ˜¯å¦è·Ÿä¹‹å‰çš„é¢œè‰²æœ‰è¶³å¤Ÿçš„ä¸åŒä¸”ä¸æ¥è¿‘ç™½è‰²æˆ–é»‘è‰²ã€‚
 åŒæ—¶åœ¨è‡ªå·±çš„ 
 [ç‰ˆæœ¬](https://github.com/BertieGo/bill-book/blob/master/frontend/src/utils/color/index.ts) å†…å»åšäº†ç²¾ç®€å®ç°ã€‚
 

 ### åç«¯
 
 #### å·¥å…·é€‰å‹ï¼š
  ![images](https://github.com/BertieGo/bill-book/blob/master/mind-images/backend-tech-pick.jpg?raw=true)
  
 #### ç›®å½•ç»“æ„ï¼š
 ```
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ csv // å­˜å‚¨åˆå§‹åŒ–æ•°æ®çš„ csv æ–‡ä»¶
â”‚Â Â  â”œâ”€â”€ bill.csv
â”‚Â Â  â””â”€â”€ categories.csv
â”œâ”€â”€ index.js // ä¸šåŠ¡ä¸»ä½“
â”œâ”€â”€ package.json
â””â”€â”€ utils // å…¬ç”¨å·¥å…·ï¼Œå†…éƒ¨ time ç”¨äºè½¬æ¢æœˆä»½ä¸º Timestamp
    â””â”€â”€ time
        â””â”€â”€ index.js
```
#### æ€è·¯
- ä½¿ç”¨è´¦å• csv ã€å•å­ç±»å‹ csv åˆå§‹åŒ–ä¸¤å¼ è¡¨ï¼Œé€šè¿‡ `` aggregate `` å»èšåˆæ•°æ®ã€‚
- å¯¹å¤–æä¾› 3 ä¸ªæ¥å£ï¼šè·å–è´¦å•åˆ—è¡¨ã€è·å–è´¦å•ç±»å‹ã€æ·»åŠ è´¦å•ã€‚
- åç«¯è®¾è®¡è¿™å—ä¼šæ¯”è¾ƒç®€å•ï¼Œæ•…æœªé‡åˆ°æ¯”è¾ƒæœ‰æ„ä¹‰çš„é—®é¢˜ï¼Œåœ¨ç¼“å­˜ã€èŠ‚æµã€é”™è¯¯å¤„ç†ä¸Šè¿˜æœ‰å¾ˆå¤šå¯ä»¥ç»§ç»­æŒ–æ˜çš„åœ°æ–¹...keep going...ğŸ’ª

### CI/CD

#### æ€è·¯
ä¸»è¦è€ƒè™‘ä¸ºå°½å¯èƒ½åœ°å¯¹ç¯å¢ƒçš„ä¾èµ–è¶Šå°‘è¶Šå¥½ï¼Œæ‰€ä»¥é‡‡ç”¨çš„ Docker çš„æ–¹å¼å»å¤„ç†ã€‚
- ç”¨ Node é•œåƒæ˜ å°„å‰ç«¯ä»£ç è¿›è¡Œæ‰“åŒ…ï¼Œå†å°†æ‰“åŒ…å¥½çš„å‰ç«¯é™æ€æ–‡ä»¶ ``COPY`` åˆ° Nginx é•œåƒå†…ï¼Œç”Ÿæˆæ–°çš„é•œåƒ ``x-mind/frontend``ï¼Œè¯¥é•œåƒæš´éœ² 4000 ç«¯å£ï¼Œä¹ŸåŒæ—¶
æ˜¯æ•´ä¸ª compose çš„è®¿é—®å…¥å£ã€‚
- åŸºäº Node é•œåƒï¼Œç›´æ¥å°†åç«¯ç›®å½•ä¸‹çš„ä»£ç  ``COPY`` åˆ°åŸºç¡€é•œåƒå†…å¹¶ `` npm install`` ç”Ÿæˆæ–°çš„ ``x-mind/backend`` é•œåƒï¼Œ æš´éœ² 8800 ç«¯å£ä¾›å¤–éƒ¨ä½¿ç”¨ã€‚
- å‰ç«¯-åç«¯-æ•°æ®åº“ä¸‰è€…å®¹å™¨çš„é€šä¿¡ä½¿ç”¨ ``networks`` ä»¥ ``bridge`` çš„å½¢å¼è¿›è¡Œæ²Ÿé€šã€‚

## Ending
åº”è˜çš„èŒä½ç­‰çº§ä¸ºä¸­çº§å‰ç«¯å¼€å‘ï¼Œéè¿œç¨‹ä¸Šç­ï¼Œä¹Ÿä¸ºäº†è®© XMind çš„å¤§ä½¬æ›´å¤šäº†è§£æˆ‘ï¼Œåœ¨å®Œæˆäº†å…¨éƒ¨éœ€æ±‚çš„åŒæ—¶ï¼Œ
ä¹Ÿè·Ÿæ ¹æ® jd ä¸Šçš„è¦æ±‚ï¼Œä½¿ç”¨ ``SVG`` ç»˜åˆ¶é¥¼å›¾ï¼ŒåŒæ—¶æ·»åŠ äº† CI/CD è¿™å—ã€‚
è€ƒè™‘åˆ° XMind ä½¿ç”¨çš„å¯èƒ½æ˜¯ ``Electron``ï¼Œæ‰€ä»¥ä¹Ÿåœ¨è‡ªå­¦ ``Electron`` ä¸­ã€‚
æœ€åå¸Œæœ›èƒ½æœ‰å¹¸åœ¨ XMind æ‰¾åˆ°èƒ½å¥‹æ–—ä¸€è¾ˆå­çš„äº‹æƒ… â¤ï¸ã€‚
